<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HashStock - Dashboard</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/dashboardstyle.css">
  </head>
  <body class="bg-[#eeeeee]">


<div class="flex mt-2 justify-center ">
    <div class=" w-11/12">


      <%- include('./partials/adminprofile.ejs') %>
      <% let userrole %>
      <% let searchbarwidth %>
      <%if (user.role === 'admin' ) { %>
        <% userrole = ''; %>
        <% searchbarwidth = '10/12'; %>
      <% } else { %>
        <% userrole = 'hidden' %>
        <% searchbarwidth = ''; %>
      <% } %>

      <div class="flex justify-center <%=userrole%>">
        <div class="flex justify-center p-2 bg-white border border-slate-300">
          <div class=" md:flex md:gap-2 lg:gap-3 xl:gap-5">
            <div class="md:flex md:items-center text-black text-md text-center font-bold font-['Montserrat'] leading-[30px]">
              Capital: <%= accounting.capital %>
            </div>
            <div class="md:flex md:items-center text-black text-md text-center font-bold font-['Montserrat'] leading-[30px]">
              Estimated Profit: <%= accounting.estimatedprofit %>
            </div>
            <div class="md:flex md:items-center text-black text-md text-center font-bold font-['Montserrat'] leading-[30px]">
              Sold Total: <%= accounting.soldtotal %>
            </div>
            <div class="md:flex md:items-center text-black text-md text-center font-bold font-['Montserrat'] leading-[30px]">
              Actual Profit: <%= accounting.profit %>
            </div>
            <div class="md:flex md:items-center text-black text-md text-center font-bold font-['Montserrat'] leading-[30px]">
              <form action="/viewbalance" method="get">
              <button><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 hover:text-sky-600">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
              </svg>
              </button>
            </form>
            </div>
            
            
          </div>
        </div>

      </div>
      
      <div class="flex justify-center py-2 md:py-5"><!--search box-->

        <div class="flex justify-center p-2  lg:w-<%=userrole%> bg-white border border-slate-300">
          <div class=" md:flex md:gap-2 lg:gap-3 xl:gap-5">
            <div class="md:flex md:items-center text-black text-xl text-center font-bold font-['Montserrat'] leading-[30px]">
              Inventory
            </div>
            <div class=" xl:w-16"></div>
            <div class="text-slate-400 text-xl flex justify-center relative font-normal font-['Montserrat'] leading-[30px] ">
              <form action="/dashboard/search" method="post">
               
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 absolute left-2 top-1/2 transform -translate-y-1/2 ">
                <path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd" />
              </svg>
              
              
              <input id="search" name="search" type="text" autocomplete="text" 
              required class="w-full md:w-52 lg:w-64 xl:w-72 h-12 focus:outline-none focus:ring-sky-500 focus:border-sky-500 focus:z-10 px-10 rounded-lg border border-solid shadow-sm bg-white bg-opacity-60 border-sky-200 placeholder-slate-500 placeholder:text-md placeholder:font-light font-medium text-md text-black" 
              placeholder="Search">
              </form>
              
            </div>
            <div class="h-2 lg:w-2 xl:w-[70px]"></div>
            <div class="flex justify-center items-center gap-1 lg:gap-5">
              <a href="/additem">
                <button class="<%=userrole%>">
                  <div class="p-1 md:p-2 bg-sky-500 hover:bg-sky-600 rounded justify-center items-center gap-2 flex">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" 
                  class="w-6 h-6 text-white">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                  </svg>
                    <div class="text-white text-base font-medium md:font-semibold font-['Montserrat'] leading-normal">Add <span class="absolute invisible md:relative md:visible">New</span> Product</div>
                  </div>
                </button>
              </a>
              <a href="/updateproducts">
                <button class="<%=userrole%>">
                  <div class="p-1 md:p-2 bg-violet-700 hover:bg-violet-800 rounded justify-center items-center gap-2 flex">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" 
                  class="w-6 h-6 text-white">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                  </svg>
                    <div class="text-white text-base font-medium md:font-semibold font-['Montserrat'] leading-normal">Update Product</div>
                  </div>
                </button>
              </a>
            
            </div>
        
          </div>
        </div>
      </div>

      <div class="flex justify-center max-h-96 md:max-h-72"><!--inventory table-->
        <div class="w-full md:w-11/12 overflow-auto  border border-slate-300 bg-white px-5 py-1">
          <div class="text-black text-xl font-bold font-['Montserrat'] leading-[30px]">
            Products
          </div>
          <div class="w-[800px] sm:w-[800px] md:w-[1050px] ">
          <table id="inventorytable" class=" table-auto text-md">
          <thead>
            <tr class="text-slate-500 pb-40">
              <th></th>
              <th class="w-2/12 text-start">Name</th>
              <th class="w-2/12 text-start">Model</th>
              <th class="w-[15%] text-start">Date</th>
              <th class="w-[12%] text-start">Type</th>
              <th class="w-1/12 text-start">Quantity</th>
              <th class="w-[14%] text-start">Purchased Price</th>
              <th class="w-[12%] text-start">Selling Price</th>
              <th class="w-[12%] text-start">Image</th>
              <th></th>
            </tr>
          </thead>
              <tbody class="text-sm font-medium">
              <% if (itemlist.length > 0) { %>
                <% itemlist.forEach(item => { %>
                  
                  <tr data-id = "<%= JSON.stringify(item)  %>" class="hover:bg-slate-100 p-3 mx-2 rounded-xl">
                    <td ><input type="checkbox" id="addtoselectedtable" name="addtoselectedtable" class="mr-3">
                    </td>
                    <td> <%= item.name %> </td>
                    <td> <%= item.model %> </td>
                    <td> <%= item.date.toISOString().slice(0,10) %> </td>
                    <td> <%= item.type %> </td>
                    <td> <%= item.quantity %> </td>
                    <td> <%= item.purchasedprice %> </td>
                    <td> <%= item.sellingprice %> </td>
                    <td><img class="w-14" src="assets/download.jfif" alt=""></td>
                    <td class="hidden"><%=item._id%></td>
                  </tr>
                <% }) %>
              <% } else { %>
                <tr>
                  <td></td>
                  <td>No Data To Display</td>
                </tr>
                <% } %>
            </tbody>
          
        </table>
      </div>
        </div>
      </div>

      <form action="/transaction" method="post">
      <div class="flex justify-center max-h-72"><!--selected list table-->
        <div class="w-full md:w-10/12 overflow-auto border-l border-r border-t  border-slate-300 bg-white px-5 mt-2 md:mt-5 py-1">
          <div class="text-black text-xl font-bold font-['Montserrat'] leading-[30px]">
            Selectd List
          </div>
          
          <div class="w-[800px]  md:w-[950px] ">
          <table id="selectedItemsTable" class=" table-auto text-md">
          <thead>
            <tr class="text-slate-500 pb-40">
              <th></th>
              <th class="w-2/12 text-start">Name</th>
              <th class="w-[14%] text-start">Model</th>
              <th class="w-[12%] text-start">Type</th>
              <th class="w-[12%] text-start">Image</th>
              <th class="w-[13%] text-start">Comment</th>
              <th class="w-1/12 text-start">Quantity</th>
              <th class="w-[14%] text-start">Selling Price</th>
              <th class="w-1/12 text-start">Total </th>
              <th></th>
            </tr>
          </thead>
          <tbody id="selectedItemsTableBody" class="text-sm font-medium">
          
          </tbody>
        </table>
        </div>
      
        </div>
      </div>
      <div class="flex justify-center mb-20">
        <div class="w-10/12 border-l border-r border-b border-slate-300 bg-white md:pl-8">
          <hr class="w-full h-px mx-auto bg-gray-100 border-0 rounded  dark:bg-gray-400">
        <div class="flex justify-end my-2 ">
          <button id="placeorderbutton" class="enabled:bg-pink-600 disabled:bg-gray-400  enabled:hover:bg-pink-700 rounded">
            <div class="p-1 md:p-2  justify-center items-center gap-2 flex">

            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-white">
              <path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75" />
            </svg>
            
              <div class="text-white text-base font-medium md:font-semibold font-['Montserrat'] leading-normal">Place Order</div>
          </div>
          </button>
          <div id="Sum" class="mx-2 md:mx-10 font-medium text-lg">
            $0
          </div>
        </div>
      </div>
      </div>
      </form>
      

    </div>
  </div>
  
<script src="/dashboardscript.js"></script>

<script src="/togglemenu.js"></script>

  </body>
</html>
